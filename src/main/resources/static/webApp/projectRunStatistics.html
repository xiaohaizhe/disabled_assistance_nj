<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>项目运行统计</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../layui/css/layui.css"  media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    <style>
        html {
            background-color: #F4F6F9;
        }
        .grid-project {
            padding: 10px;
        }
        .project-info {
            height: 260px;
            background-color: #fff;
            padding: 10px;
        }
        .nav-title {
            background-color: #fff;
            padding: 20px;
            border-bottom: 1px solid #ccc;
            font-size: 18px;
        }
        .bold-text {
            font-weight: bold;
            font-size: 24px;
        }
        .numbers {
            padding: 10px;
        }
        .numbers > p{
            font-size: 20px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
<!--[if lt IE 9]>
<script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
<script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<div class="nav-title">项目运行统计</div>
<div class="layui-fluid">
    <div id="projects" class="layui-row">
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text">12000</span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-sm3">
            <div class="grid-project">
                <div class="project-info">
                    <div>
                        <button onclick="gotoDetail()" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>
                        <h2>项目名称</h2>
                        <div class="numbers">
                            <p>总服务人数: <span class="bold-text">200</span></p>
                            <p>总服务人次: <span class="bold-text">6000</span></p>
                            <p>总服务时长: <span class="bold-text"></span> 分钟</p>
                            <p>平均服务时长: <span class="bold-text">20</span> 分钟</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="../layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
function gotoDetail(id) {
    window.open("projectInfo.html?id="+id)
}
layui.use(['table', 'form'], function () {
    var $ = layui.$;
    $.ajax({
        type: "GET",
        url: "/api/project/getProjectStatistic",
        data:{organizationId:"2"},
        success: function (data) {
            console.log(data);
            setBox(data.data,$("#projects"))
        }
    })
})


    function setBox(array,dom) {
        var html = [];
        for (var i = 0; i < array.length; i++) {
            localStorage.setItem(array[i].id,JSON.stringify(array[i]));
            html.push('<div class="layui-col-sm3">');
            html.push(' <div class="grid-project">');
            html.push(' <div class="project-info">');
            html.push('<div>');
            html.push('<button onclick="gotoDetail('+array[i].id+')" style="float: right;" type="button" class="layui-btn layui-btn-primary layui-btn-xs">详情</button>');
            html.push('<h2>'+array[i].name+'</h2>');
            html.push('<div class="numbers">');
            html.push('<p>总服务人数: <span class="bold-text">'+array[i].personCountSum+'</span></p>');
            html.push('<p>总服务人次: <span class="bold-text">'+array[i].personTimeSum+'</span></p>');
            html.push('<p>总服务时长: <span class="bold-text">'+array[i].averageTime+'</span> 分钟</p>');
            html.push('<p>平均服务时长: <span class="bold-text">'+array[i].totalTimeSum+'</span> 分钟</p>');
            html.push('</div></div>');
            html.push('</div></div></div>');
        }
        dom.html(html.join(""))
    }

</script>

</body>
</html>